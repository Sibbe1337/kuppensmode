{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 79,
  "lineage": "315b171f-c89a-0bda-e500-b400edbe1825",
  "outputs": {
    "clerk_secret_key_dev_secret_id": {
      "value": "clerk-secret-key-dev",
      "type": "string"
    },
    "dev_cloudfunctions_source_bucket_name": {
      "value": "nl-dev-cloudfunctions-source-a1b2c3d4",
      "type": "string"
    },
    "dev_restore_topic_name": {
      "value": "nl-dev-restore-requests",
      "type": "string"
    },
    "dev_snapshot_topic_name": {
      "value": "nl-dev-snapshot-requests",
      "type": "string"
    },
    "dev_snapshot_worker_function_name": {
      "value": "dev-snapshot-worker",
      "type": "string"
    },
    "dev_snapshot_worker_sa_email": {
      "value": "notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
      "type": "string"
    },
    "dev_snapshot_worker_uri": {
      "value": "https://dev-snapshot-worker-36wqzjn5ka-ew.a.run.app",
      "type": "string"
    },
    "dev_snapshots_bucket_name": {
      "value": "nl-dev-snapshots-youruniqueid",
      "type": "string"
    },
    "notion_api_key_dev_secret_id": {
      "value": "notion-api-key-dev",
      "type": "string"
    },
    "worker_sa_email": {
      "value": "notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
      "type": "string"
    },
    "worker_sa_name": {
      "value": "projects/notion-lifeline/serviceAccounts/notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "google_cloud_run_service_iam_member",
      "name": "dev_snapshot_worker_invoker_eventarc",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1GvS4TIE=",
            "id": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker/roles/run.invoker/serviceAccount:service-343417106506@gcp-sa-eventarc.iam.gserviceaccount.com",
            "location": "europe-west1",
            "member": "serviceAccount:service-343417106506@gcp-sa-eventarc.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/run.invoker",
            "service": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.notion_api_key_dev",
            "google_secret_manager_secret.openai_api_key_dev",
            "google_secret_manager_secret.pinecone_api_key_dev",
            "google_secret_manager_secret.pinecone_index_name_dev",
            "google_service_account.worker_sa",
            "google_storage_bucket.dev_snapshots_bucket",
            "module.dev_snapshot_worker.google_cloudfunctions2_function.function",
            "module.pubsub_snapshot_requests_dev.google_pubsub_topic.topic"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_cloud_run_service_iam_member",
      "name": "dev_snapshot_worker_invoker_pubsub",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1GvS4TIE=",
            "id": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker/roles/run.invoker/serviceAccount:service-343417106506@gcp-sa-pubsub.iam.gserviceaccount.com",
            "location": "europe-west1",
            "member": "serviceAccount:service-343417106506@gcp-sa-pubsub.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/run.invoker",
            "service": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.notion_api_key_dev",
            "google_secret_manager_secret.openai_api_key_dev",
            "google_secret_manager_secret.pinecone_api_key_dev",
            "google_secret_manager_secret.pinecone_index_name_dev",
            "google_service_account.worker_sa",
            "google_storage_bucket.dev_snapshots_bucket",
            "module.dev_snapshot_worker.google_cloudfunctions2_function.function",
            "module.pubsub_snapshot_requests_dev.google_pubsub_topic.topic"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_cloud_run_service_iam_member",
      "name": "dev_snapshot_worker_invoker_self",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1Gud0kxQ=",
            "id": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker/roles/run.invoker/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "location": "europe-west1",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/run.invoker",
            "service": "v1/projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.notion_api_key_dev",
            "google_secret_manager_secret.openai_api_key_dev",
            "google_secret_manager_secret.pinecone_api_key_dev",
            "google_secret_manager_secret.pinecone_index_name_dev",
            "google_service_account.worker_sa",
            "google_storage_bucket.dev_snapshots_bucket",
            "module.dev_snapshot_worker.google_cloudfunctions2_function.function",
            "module.pubsub_snapshot_requests_dev.google_pubsub_topic.topic"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "clerk_secret_key_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:04:09.272782Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "clerk"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/clerk-secret-key-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "clerk"
            },
            "name": "projects/343417106506/secrets/clerk-secret-key-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "clerk-secret-key-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "clerk"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "gcp_service_account_key_json_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:07:16.481696Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "gcp-auth"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/gcp-service-account-key-json-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "gcp-auth"
            },
            "name": "projects/343417106506/secrets/gcp-service-account-key-json-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "gcp-service-account-key-json-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "gcp-auth"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "notion_api_key_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T08:44:56.757145Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "notion-integration"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/notion-api-key-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "notion-integration"
            },
            "name": "projects/343417106506/secrets/notion-api-key-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "notion-api-key-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "notion-integration"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "openai_api_key_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:06:45.344657Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "openai"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/openai-api-key-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "openai"
            },
            "name": "projects/343417106506/secrets/openai-api-key-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "openai-api-key-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "openai"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "pinecone_api_key_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:06:06.413353Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/pinecone-api-key-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone"
            },
            "name": "projects/343417106506/secrets/pinecone-api-key-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "pinecone-api-key-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "pinecone_index_name_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:08:01.934638Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone-config"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/pinecone-index-name-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone-config"
            },
            "name": "projects/343417106506/secrets/pinecone-index-name-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "pinecone-index-name-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "pinecone-config"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "stripe_secret_key_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:04:35.642975Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/stripe-secret-key-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe"
            },
            "name": "projects/343417106506/secrets/stripe-secret-key-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "stripe-secret-key-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret",
      "name": "stripe_webhook_secret_dev",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "annotations": {},
            "create_time": "2025-05-14T09:05:22.891166Z",
            "effective_annotations": {},
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe-webhook"
            },
            "expire_time": "",
            "id": "projects/notion-lifeline/secrets/stripe-webhook-secret-dev",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe-webhook"
            },
            "name": "projects/343417106506/secrets/stripe-webhook-secret-dev",
            "project": "notion-lifeline",
            "replication": [
              {
                "auto": [],
                "user_managed": [
                  {
                    "replicas": [
                      {
                        "customer_managed_encryption": [],
                        "location": "europe-west1"
                      }
                    ]
                  }
                ]
              }
            ],
            "rotation": [],
            "secret_id": "stripe-webhook-secret-dev",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "stripe-webhook"
            },
            "timeouts": null,
            "topics": [],
            "ttl": null,
            "version_aliases": {},
            "version_destroy_ttl": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "clerk_secret_key_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FR7NgyY=",
            "id": "projects/notion-lifeline/secrets/clerk-secret-key-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/clerk-secret-key-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.clerk_secret_key_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "gcp_service_account_key_json_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FR7Pg9U=",
            "id": "projects/notion-lifeline/secrets/gcp-service-account-key-json-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/gcp-service-account-key-json-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.gcp_service_account_key_json_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "notion_api_key_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FZR40/k=",
            "id": "projects/notion-lifeline/secrets/notion-api-key-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/notion-api-key-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.notion_api_key_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "openai_api_key_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FZlkKCQ=",
            "id": "projects/notion-lifeline/secrets/openai-api-key-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/openai-api-key-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.openai_api_key_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "pinecone_api_key_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FZW17eU=",
            "id": "projects/notion-lifeline/secrets/pinecone-api-key-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/pinecone-api-key-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.pinecone_api_key_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "pinecone_index_name_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FZb3ZPQ=",
            "id": "projects/notion-lifeline/secrets/pinecone-index-name-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/pinecone-index-name-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.pinecone_index_name_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "stripe_secret_key_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FR7OA6w=",
            "id": "projects/notion-lifeline/secrets/stripe-secret-key-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/stripe-secret-key-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.stripe_secret_key_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_secret_manager_secret_iam_member",
      "name": "stripe_webhook_secret_dev_accessor",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "condition": [],
            "etag": "BwY1FR7SCoI=",
            "id": "projects/notion-lifeline/secrets/stripe-webhook-secret-dev/roles/secretmanager.secretAccessor/serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "role": "roles/secretmanager.secretAccessor",
            "secret_id": "projects/notion-lifeline/secrets/stripe-webhook-secret-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "google_secret_manager_secret.stripe_webhook_secret_dev",
            "google_service_account.worker_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_service_account",
      "name": "worker_sa",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "notion-lifeline-worker-sa",
            "create_ignore_already_exists": null,
            "description": "Service account for Notion Lifeline backend workers (snapshot, restore, etc.) in dev.",
            "disabled": false,
            "display_name": "Notion Lifeline App Worker Service Account",
            "email": "notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "id": "projects/notion-lifeline/serviceAccounts/notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "member": "serviceAccount:notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "name": "projects/notion-lifeline/serviceAccounts/notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
            "project": "notion-lifeline",
            "timeouts": null,
            "unique_id": "105024230229338931334"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_storage_bucket",
      "name": "dev_cloudfunctions_source_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "autoclass": [],
            "cors": [],
            "custom_placement_config": [],
            "default_event_based_hold": false,
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "cloudfunctions-source-storage"
            },
            "enable_object_retention": false,
            "encryption": [],
            "force_destroy": false,
            "id": "nl-dev-cloudfunctions-source-a1b2c3d4",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "cloudfunctions-source-storage"
            },
            "lifecycle_rule": [],
            "location": "US",
            "logging": [],
            "name": "nl-dev-cloudfunctions-source-a1b2c3d4",
            "project": "notion-lifeline",
            "project_number": 343417106506,
            "public_access_prevention": "enforced",
            "requester_pays": false,
            "retention_policy": [],
            "rpo": "DEFAULT",
            "self_link": "https://www.googleapis.com/storage/v1/b/nl-dev-cloudfunctions-source-a1b2c3d4",
            "soft_delete_policy": [
              {
                "effective_time": "2025-05-14T09:41:36.633Z",
                "retention_duration_seconds": 604800
              }
            ],
            "storage_class": "STANDARD",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "cloudfunctions-source-storage"
            },
            "timeouts": null,
            "uniform_bucket_level_access": true,
            "url": "gs://nl-dev-cloudfunctions-source-a1b2c3d4",
            "versioning": [
              {
                "enabled": true
              }
            ],
            "website": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsInJlYWQiOjI0MDAwMDAwMDAwMCwidXBkYXRlIjoyNDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "google_storage_bucket",
      "name": "dev_snapshots_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "autoclass": [],
            "cors": [],
            "custom_placement_config": [],
            "default_event_based_hold": false,
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-storage"
            },
            "enable_object_retention": false,
            "encryption": [],
            "force_destroy": false,
            "id": "nl-dev-snapshots-youruniqueid",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-storage"
            },
            "lifecycle_rule": [],
            "location": "EU",
            "logging": [],
            "name": "nl-dev-snapshots-youruniqueid",
            "project": "notion-lifeline",
            "project_number": 343417106506,
            "public_access_prevention": "inherited",
            "requester_pays": false,
            "retention_policy": [],
            "rpo": "DEFAULT",
            "self_link": "https://www.googleapis.com/storage/v1/b/nl-dev-snapshots-youruniqueid",
            "soft_delete_policy": [
              {
                "effective_time": "2025-05-14T08:35:11.384Z",
                "retention_duration_seconds": 604800
              }
            ],
            "storage_class": "STANDARD",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-storage"
            },
            "timeouts": null,
            "uniform_bucket_level_access": true,
            "url": "gs://nl-dev-snapshots-youruniqueid",
            "versioning": [
              {
                "enabled": true
              }
            ],
            "website": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsInJlYWQiOjI0MDAwMDAwMDAwMCwidXBkYXRlIjoyNDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ=="
        }
      ]
    },
    {
      "module": "module.dev_snapshot_worker",
      "mode": "managed",
      "type": "google_cloudfunctions2_function",
      "name": "function",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "build_config": [
              {
                "automatic_update_policy": [
                  {}
                ],
                "build": "projects/343417106506/locations/europe-west1/builds/4dfdbb5a-3214-414c-93ed-fa42aaefd49e",
                "docker_repository": "projects/notion-lifeline/locations/europe-west1/repositories/gcf-artifacts",
                "entry_point": "snapshotTrigger",
                "environment_variables": {},
                "on_deploy_update_policy": [],
                "runtime": "nodejs20",
                "service_account": "projects/notion-lifeline/serviceAccounts/343417106506-compute@developer.gserviceaccount.com",
                "source": [
                  {
                    "repo_source": [],
                    "storage_source": [
                      {
                        "bucket": "gcf-v2-sources-343417106506-europe-west1",
                        "generation": 1747216977070141,
                        "object": "dev-snapshot-worker/function-source.zip"
                      }
                    ]
                  }
                ],
                "worker_pool": ""
              }
            ],
            "description": "Dev environment: Worker to take snapshots of Notion workspaces.",
            "effective_labels": {
              "application": "notion-lifeline",
              "deployment-tool": "cli-gcloud",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-worker",
              "trigger": "pubsub"
            },
            "environment": "GEN_2",
            "event_trigger": [
              {
                "event_filters": [],
                "event_type": "google.cloud.pubsub.topic.v1.messagePublished",
                "pubsub_topic": "projects/notion-lifeline/topics/nl-dev-snapshot-requests",
                "retry_policy": "RETRY_POLICY_RETRY",
                "service_account_email": "notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
                "trigger": "projects/notion-lifeline/locations/europe-west1/triggers/dev-snapshot-worker-538174",
                "trigger_region": "europe-west1"
              }
            ],
            "id": "projects/notion-lifeline/locations/europe-west1/functions/dev-snapshot-worker",
            "kms_key_name": "",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-worker",
              "trigger": "pubsub"
            },
            "location": "europe-west1",
            "name": "dev-snapshot-worker",
            "project": "notion-lifeline",
            "service_config": [
              {
                "all_traffic_on_latest_revision": true,
                "available_cpu": "0.3333",
                "available_memory": "512Mi",
                "environment_variables": {
                  "GCP_PROJECT_ID": "notion-lifeline",
                  "GCS_BUCKET_NAME": "nl-dev-snapshots-youruniqueid",
                  "LOG_EXECUTION_ID": "true",
                  "NODE_ENV": "development"
                },
                "gcf_uri": "",
                "ingress_settings": "ALLOW_INTERNAL_ONLY",
                "max_instance_count": 100,
                "max_instance_request_concurrency": 1,
                "min_instance_count": 0,
                "secret_environment_variables": [
                  {
                    "key": "NOTION_API_KEY",
                    "project_id": "notion-lifeline",
                    "secret": "notion-api-key-dev",
                    "version": "1"
                  },
                  {
                    "key": "PINECONE_API_KEY",
                    "project_id": "notion-lifeline",
                    "secret": "pinecone-api-key-dev",
                    "version": "1"
                  },
                  {
                    "key": "PINECONE_INDEX_NAME",
                    "project_id": "notion-lifeline",
                    "secret": "pinecone-index-name-dev",
                    "version": "1"
                  },
                  {
                    "key": "OPENAI_API_KEY",
                    "project_id": "notion-lifeline",
                    "secret": "openai-api-key-dev",
                    "version": "1"
                  }
                ],
                "secret_volumes": [],
                "service": "projects/notion-lifeline/locations/europe-west1/services/dev-snapshot-worker",
                "service_account_email": "notion-lifeline-worker-sa@notion-lifeline.iam.gserviceaccount.com",
                "timeout_seconds": 300,
                "uri": "https://dev-snapshot-worker-36wqzjn5ka-ew.a.run.app",
                "vpc_connector": "",
                "vpc_connector_egress_settings": ""
              }
            ],
            "state": "ACTIVE",
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-worker",
              "trigger": "pubsub"
            },
            "timeouts": null,
            "update_time": "2025-05-14T16:22:16.154624653Z",
            "url": "https://europe-west1-notion-lifeline.cloudfunctions.net/dev-snapshot-worker"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6MzYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "google_secret_manager_secret.notion_api_key_dev",
            "google_secret_manager_secret.openai_api_key_dev",
            "google_secret_manager_secret.pinecone_api_key_dev",
            "google_secret_manager_secret.pinecone_index_name_dev",
            "google_service_account.worker_sa",
            "google_storage_bucket.dev_snapshots_bucket",
            "module.pubsub_snapshot_requests_dev.google_pubsub_topic.topic"
          ]
        }
      ]
    },
    {
      "module": "module.pubsub_restore_requests_dev",
      "mode": "managed",
      "type": "google_pubsub_topic",
      "name": "topic",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "restore-trigger"
            },
            "id": "projects/notion-lifeline/topics/nl-dev-restore-requests",
            "ingestion_data_source_settings": [],
            "kms_key_name": "",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "restore-trigger"
            },
            "message_retention_duration": "",
            "message_storage_policy": [],
            "name": "nl-dev-restore-requests",
            "project": "notion-lifeline",
            "schema_settings": [],
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "restore-trigger"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.pubsub_snapshot_requests_dev",
      "mode": "managed",
      "type": "google_pubsub_topic",
      "name": "topic",
      "provider": "provider[\"registry.terraform.io/hashicorp/google\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "effective_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-trigger"
            },
            "id": "projects/notion-lifeline/topics/nl-dev-snapshot-requests",
            "ingestion_data_source_settings": [],
            "kms_key_name": "",
            "labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-trigger"
            },
            "message_retention_duration": "",
            "message_storage_policy": [],
            "name": "nl-dev-snapshot-requests",
            "project": "notion-lifeline",
            "schema_settings": [],
            "terraform_labels": {
              "application": "notion-lifeline",
              "environment": "development",
              "owner": "emil_soujeh",
              "service": "snapshot-trigger"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    }
  ],
  "check_results": [
    {
      "object_kind": "var",
      "config_addr": "module.dev_snapshot_worker.var.trigger_type",
      "status": "pass",
      "objects": [
        {
          "object_addr": "module.dev_snapshot_worker.var.trigger_type",
          "status": "pass"
        }
      ]
    }
  ]
}
